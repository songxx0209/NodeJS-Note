<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		.ball{
			width:40px;
			height:40px;
			border-radius: 20px;
			
		}
		.ball1{
			background: red;
		}
		.ball2{
			background: green;
		}
		.ball3{
			background: black;
		}
	</style>
</head>
<body>
	<div class="ball1 ball" style="margin-left:0;"></div>
	<div class="ball2 ball" style="margin-left:0;"></div>
	<div class="ball3 ball" style="margin-left:0;"></div>
	<script>
		var ball1 = document.querySelector('.ball1');
		var ball2 = document.querySelector('.ball2');
		var ball3 = document.querySelector('.ball3');
		//console.dir(ball1.style.marginLeft);

		function animate(ball, distance, callback){
			setTimeout(function(){
				var ml = parseInt(ball.style.marginLeft, 10);
				console.log(ml);
				if(ml === distance){
					callback && callback();	
				}
				else{
					if(ml < distance){
						ml++;
						console.log(ml);
					}else{
						ml--;
					}
					console.log('23');
					ball.style.marginLeft = ml + 'px';
					animate(ball, distance, callback);
				}
			},13);
		}
		animate(ball1, 100, function(){
			animate(ball2, 200, function(){
				animate(ball3, 300, function(){
					animate(ball3, 50, function(){
						animate(ball2, 50, function(){
							animate(ball1, 50, function(){
								//
							});
						});
					});
				});
			});
		});
	</script>
</body>
</html>